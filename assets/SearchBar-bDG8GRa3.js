import{f as L,g as c,i,h as k,m as M,o as r,c as l,n as z,v as B,a as g,p as C,u as x,F as D,q as W,s as E,t as d,k as v}from"./index-4221aHVz.js";import{a as F,u as V}from"./MainView-BTAsejly.js";const N=L("locationStore",()=>{const u=c([]),o=c(!1),e=c(null);return{suggestions:u,loading:o,error:e,fetchLocations:async s=>{if(s.length>2){o.value=!0,e.value=null;try{const n=await F.fetchWeatherLocations(s);u.value=n}catch(n){e.value=n}finally{o.value=!1}}else u.value=[]}}}),U={class:"w-auto relative"},H={key:0,class:"peer-focus:flex hidden flex-col overflow-x-hidden bg-white rounded-b-lg shadow-md absolute max-sm:w-full"},I=["onMousedown"],O={key:1,class:"flex items-center w-96 h-10 bg-white rounded-b-lg shadow-md absolute max-sm:w-full"},T=g("span",{class:"p-2"}," Loading... ",-1),$=[T],j={key:2,class:"flex items-center w-96 h-10 bg-white rounded-b-lg shadow-md absolute max-sm:w-full"},q={class:"p-2"},K={__name:"SearchBar",setup(u){const o=V(),e=N(),a=c(!1),s=c(""),n=i(()=>e.suggestions)||[],h=i(()=>e.loading),p=i(()=>e.error),w=c(!1),f=()=>{w.value=window.matchMedia("(max-width: 640px)").matches},y=()=>{e.fetchLocations(s.value),s.value.length>2?a.value=!0:a.value=!1},b=m=>{o.fetchCurrentWeatherData(m),o.fetchForecastWeatherData(m),s.value="",e.suggestions=[],a.value=!1},S=i(()=>({"rounded-es-none":a.value,"rounded-ee-none":a.value&&w.value}));return k(()=>{f(),window.addEventListener("resize",f)}),M(()=>{window.removeEventListener("resize",f)}),(m,_)=>(r(),l("div",U,[z(g("input",{onInput:y,type:"text","onUpdate:modelValue":_[0]||(_[0]=t=>s.value=t),placeholder:"Search for cities...",class:C(["peer bg-sky-600 bg-opacity-35 py-3 text-xl text-white placeholder:text-gray-200 border-none focus:border-none focus:ring-0 rounded-lg shadow-md w-full max-h-14 transition-all",S.value])},null,34),[[B,s.value]]),x(n).length&&!h.value?(r(),l("ul",H,[(r(!0),l(D,null,W(x(n),t=>(r(),l("li",{key:t.id,class:"p-2 cursor-pointer hover:bg-gray-100 max-sm:w-full",onMousedown:E(A=>b(t.name),["prevent"])},d(t.name)+", "+d(t.region)+", "+d(t.country),41,I))),128))])):v("",!0),h.value?(r(),l("div",O,$)):v("",!0),p.value&&!h.value?(r(),l("div",j,[g("span",q,d(p.value),1)])):v("",!0)]))}};export{K as default};
